<!DOCTYPE html>
<html lang="el">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dynamic Running Coach</title>
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#1e3a8a">
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    h1 { color: darkblue; }
    .plan, .faq { background: #f4f4f4; padding: 15px; margin-top: 20px; border-radius: 8px; }
    input, select { padding: 8px; margin: 5px 0; width: 200px; }
    button { padding: 10px 15px; margin-top: 10px; cursor: pointer; }
    .question { cursor: pointer; margin: 10px 0; font-weight: bold; }
    .answer { display: none; margin-left: 10px; color: #333; }
  </style>
</head>
<body>
  <h1>🏃 Dynamic Running Coach</h1>
  <p>Βάλε την τελευταία σου επίδοση (π.χ. 5K = 21’00)</p>

  <label>Απόσταση:</label>
  <select id="distance">
    <option value="5">5K</option>
    <option value="10">10K</option>
    <option value="21.1">Ημιμαραθώνιος</option>
    <option value="42.2">Μαραθώνιος</option>
  </select><br>

  <label>Χρόνος (λεπτά):</label>
  <input type="number" id="minutes" placeholder="π.χ. 21"><br>

  <button onclick="generatePlan()">Δημιουργία Προγράμματος</button>

  <div id="output" class="plan"></div>

  <h3>💬 Συχνές Ερωτήσεις (FAQ)</h3>
  <div class="faq" id="faq"></div>

  <script>
    // Υπολογισμός VDOT (απλοποιημένη εξίσωση Daniels)
    function calcVDOT(distanceKm, timeMin) {
      let timeHr = timeMin / 60;
      let velocity = distanceKm / timeHr;
      let vo2 = -4.6 + 0.182258 * velocity + 0.000104 * velocity * velocity;
      let vdot = vo2 / (0.8 + 0.1894393 * Math.exp(-0.012778 * timeMin) + 0.2989558 * Math.exp(-0.1932605 * timeMin));
      return vdot.toFixed(1);
    }

    // Pace ανά VDOT (απλοποιημένο)
    function getPaces(vdot) {
      vdot = parseFloat(vdot);
      return {
        easy: (5.5 - (vdot - 30) * 0.05).toFixed(2),
        tempo: (4.5 - (vdot - 30) * 0.04).toFixed(2),
        interval: (4.0 - (vdot - 30) * 0.03).toFixed(2),
        rep: (3.6 - (vdot - 30) * 0.025).toFixed(2)
      };
    }

    function generatePlan() {
      let dist = parseFloat(document.getElementById("distance").value);
      let time = parseFloat(document.getElementById("minutes").value);

      if (!time || time <= 0) {
        document.getElementById("output").innerHTML = "<p>❌ Βάλε σωστό χρόνο.</p>";
        return;
      }

      let vdot = calcVDOT(dist, time);
      let paces = getPaces(vdot);

      let plan = `
        <h3>Το VDOT σου είναι: ${vdot}</h3>
        <p><b>Ρυθμοί προπόνησης:</b></p>
        <ul>
          <li>Easy: ~${paces.easy} λεπτά/χλμ</li>
          <li>Tempo: ~${paces.tempo} λεπτά/χλμ</li>
          <li>Interval: ~${paces.interval} λεπτά/χλμ</li>
          <li>Repetition: ~${paces.rep} λεπτά/χλμ</li>
        </ul>
        <h3>Εβδομαδιαίο πρόγραμμα:</h3>
        <ul>
          <li>Δευτέρα: Ξεκούραση</li>
          <li>Τρίτη: Διαλειμματική (6x800m στο ${paces.interval})</li>
          <li>Τετάρτη: Easy Run (6-8χλμ στο ${paces.easy})</li>
          <li>Πέμπτη: Tempo Run (20’ στο ${paces.tempo})</li>
          <li>Παρασκευή: Ξεκούραση</li>
          <li>Σάββατο: Long Run (12-18χλμ στο ${paces.easy})</li>
          <li>Κυριακή: Recovery (5χλμ στο ${paces.easy})</li>
        </ul>
      `;
      document.getElementById("output").innerHTML = plan;
    }

    // FAQ
    const faqData = [
      ["Τι να φάω πριν το long run;", "👉 3 ώρες πριν, φάε υδατάνθρακες με λίγα λιπαρά."],
      ["Αν πονάω στο γόνατο;", "👉 Ξεκούραση, πάγος, αν συνεχιστεί πήγαινε γιατρό."],
      ["Μπορώ να τρέξω στη βροχή;", "👉 Ναι, εκτός αν έχει καταιγίδα."],
      ["Πόσες μέρες πριν τον αγώνα κόβω τα long runs;", "👉 2-3 εβδομάδες πριν στον Μαραθώνιο."],
      ["Πόσο συχνά διαλειμματικές;", "👉 1 φορά/εβδομάδα, το πολύ 2."],
      ["Τι παπούτσια να πάρω;", "👉 Ανάλογα με βάρος και όγκο χιλιομέτρων."],
      ["Τι πίνω σε long run >90’;", "👉 Ισοτονικό + gels κάθε 40-45’."],
      ["Διατάσεις πριν/μετά;", "👉 Πριν δυναμικές, μετά στατικές."],
      ["Πόσες μέρες τρέξιμο/εβδομάδα;", "👉 Αρχάριοι 3-4, έμπειροι 5-6."],
      ["Αν δεν έχω χρόνο;", "👉 Έστω 20’ easy ή 10x1’ intervals καλύτερο από τίποτα."]
    ];

    const faqContainer = document.getElementById("faq");
    faqData.forEach(([q, a]) => {
      const qEl = document.createElement("div");
      qEl.className = "question";
      qEl.textContent = "❓ " + q;
      qEl.onclick = () => {
        aEl.style.display = aEl.style.display === "block" ? "none" : "block";
      };
      const aEl = document.createElement("div");
      aEl.className = "answer";
      aEl.textContent = a;
      faqContainer.appendChild(qEl);
      faqContainer.appendChild(aEl);
    });

    // Εγγραφή service worker
    if ("serviceWorker" in navigator) {
      navigator.serviceWorker.register("sw.js").then(() => {
        console.log("✅ Service Worker registered");
      });
    }
  </script>
</body>
</html>
