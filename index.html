<!DOCTYPE html>
<html lang="el">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dynamic Running Coach</title>
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#1e3a8a">
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    h1 { color: darkblue; }
    .plan, .faq { background: #f4f4f4; padding: 15px; margin-top: 20px; border-radius: 8px; }
    input, select { padding: 8px; margin: 5px 0; width: 200px; }
    button { padding: 10px 15px; margin-top: 10px; cursor: pointer; }
    .question { cursor: pointer; margin: 10px 0; font-weight: bold; }
    .answer { display: none; margin-left: 10px; color: #333; }
  </style>
</head>
<body>
  <h1>ğŸƒ Dynamic Running Coach</h1>
  <p>Î’Î¬Î»Îµ Ï„Î·Î½ Ï„ÎµÎ»ÎµÏ…Ï„Î±Î¯Î± ÏƒÎ¿Ï… ÎµÏ€Î¯Î´Î¿ÏƒÎ· (Ï€.Ï‡. 5K = 21â€™00)</p>

  <label>Î‘Ï€ÏŒÏƒÏ„Î±ÏƒÎ·:</label>
  <select id="distance">
    <option value="5">5K</option>
    <option value="10">10K</option>
    <option value="21.1">Î—Î¼Î¹Î¼Î±ÏÎ±Î¸ÏÎ½Î¹Î¿Ï‚</option>
    <option value="42.2">ÎœÎ±ÏÎ±Î¸ÏÎ½Î¹Î¿Ï‚</option>
  </select><br>

  <label>Î§ÏÏŒÎ½Î¿Ï‚ (Î»ÎµÏ€Ï„Î¬):</label>
  <input type="number" id="minutes" placeholder="Ï€.Ï‡. 21"><br>

  <button onclick="generatePlan()">Î”Î·Î¼Î¹Î¿Ï…ÏÎ³Î¯Î± Î ÏÎ¿Î³ÏÎ¬Î¼Î¼Î±Ï„Î¿Ï‚</button>

  <div id="output" class="plan"></div>

  <h3>ğŸ’¬ Î£Ï…Ï‡Î½Î­Ï‚ Î•ÏÏ‰Ï„Î®ÏƒÎµÎ¹Ï‚ (FAQ)</h3>
  <div class="faq" id="faq"></div>

  <script>
    // Î¥Ï€Î¿Î»Î¿Î³Î¹ÏƒÎ¼ÏŒÏ‚ VDOT (Î±Ï€Î»Î¿Ï€Î¿Î¹Î·Î¼Î­Î½Î· ÎµÎ¾Î¯ÏƒÏ‰ÏƒÎ· Daniels)
    function calcVDOT(distanceKm, timeMin) {
      let timeHr = timeMin / 60;
      let velocity = distanceKm / timeHr;
      let vo2 = -4.6 + 0.182258 * velocity + 0.000104 * velocity * velocity;
      let vdot = vo2 / (0.8 + 0.1894393 * Math.exp(-0.012778 * timeMin) + 0.2989558 * Math.exp(-0.1932605 * timeMin));
      return vdot.toFixed(1);
    }

    // Pace Î±Î½Î¬ VDOT (Î±Ï€Î»Î¿Ï€Î¿Î¹Î·Î¼Î­Î½Î¿)
    function getPaces(vdot) {
      vdot = parseFloat(vdot);
      return {
        easy: (5.5 - (vdot - 30) * 0.05).toFixed(2),
        tempo: (4.5 - (vdot - 30) * 0.04).toFixed(2),
        interval: (4.0 - (vdot - 30) * 0.03).toFixed(2),
        rep: (3.6 - (vdot - 30) * 0.025).toFixed(2)
      };
    }

    function generatePlan() {
      let dist = parseFloat(document.getElementById("distance").value);
      let time = parseFloat(document.getElementById("minutes").value);

      if (!time || time <= 0) {
        document.getElementById("output").innerHTML = "<p>âŒ Î’Î¬Î»Îµ ÏƒÏ‰ÏƒÏ„ÏŒ Ï‡ÏÏŒÎ½Î¿.</p>";
        return;
      }

      let vdot = calcVDOT(dist, time);
      let paces = getPaces(vdot);

      let plan = `
        <h3>Î¤Î¿ VDOT ÏƒÎ¿Ï… ÎµÎ¯Î½Î±Î¹: ${vdot}</h3>
        <p><b>Î¡Ï…Î¸Î¼Î¿Î¯ Ï€ÏÎ¿Ï€ÏŒÎ½Î·ÏƒÎ·Ï‚:</b></p>
        <ul>
          <li>Easy: ~${paces.easy} Î»ÎµÏ€Ï„Î¬/Ï‡Î»Î¼</li>
          <li>Tempo: ~${paces.tempo} Î»ÎµÏ€Ï„Î¬/Ï‡Î»Î¼</li>
          <li>Interval: ~${paces.interval} Î»ÎµÏ€Ï„Î¬/Ï‡Î»Î¼</li>
          <li>Repetition: ~${paces.rep} Î»ÎµÏ€Ï„Î¬/Ï‡Î»Î¼</li>
        </ul>
        <h3>Î•Î²Î´Î¿Î¼Î±Î´Î¹Î±Î¯Î¿ Ï€ÏÏŒÎ³ÏÎ±Î¼Î¼Î±:</h3>
        <ul>
          <li>Î”ÎµÏ…Ï„Î­ÏÎ±: ÎÎµÎºÎ¿ÏÏÎ±ÏƒÎ·</li>
          <li>Î¤ÏÎ¯Ï„Î·: Î”Î¹Î±Î»ÎµÎ¹Î¼Î¼Î±Ï„Î¹ÎºÎ® (6x800m ÏƒÏ„Î¿ ${paces.interval})</li>
          <li>Î¤ÎµÏ„Î¬ÏÏ„Î·: Easy Run (6-8Ï‡Î»Î¼ ÏƒÏ„Î¿ ${paces.easy})</li>
          <li>Î Î­Î¼Ï€Ï„Î·: Tempo Run (20â€™ ÏƒÏ„Î¿ ${paces.tempo})</li>
          <li>Î Î±ÏÎ±ÏƒÎºÎµÏ…Î®: ÎÎµÎºÎ¿ÏÏÎ±ÏƒÎ·</li>
          <li>Î£Î¬Î²Î²Î±Ï„Î¿: Long Run (12-18Ï‡Î»Î¼ ÏƒÏ„Î¿ ${paces.easy})</li>
          <li>ÎšÏ…ÏÎ¹Î±ÎºÎ®: Recovery (5Ï‡Î»Î¼ ÏƒÏ„Î¿ ${paces.easy})</li>
        </ul>
      `;
      document.getElementById("output").innerHTML = plan;
    }

    // FAQ
    const faqData = [
      ["Î¤Î¹ Î½Î± Ï†Î¬Ï‰ Ï€ÏÎ¹Î½ Ï„Î¿ long run;", "ğŸ‘‰ 3 ÏÏÎµÏ‚ Ï€ÏÎ¹Î½, Ï†Î¬Îµ Ï…Î´Î±Ï„Î¬Î½Î¸ÏÎ±ÎºÎµÏ‚ Î¼Îµ Î»Î¯Î³Î± Î»Î¹Ï€Î±ÏÎ¬."],
      ["Î‘Î½ Ï€Î¿Î½Î¬Ï‰ ÏƒÏ„Î¿ Î³ÏŒÎ½Î±Ï„Î¿;", "ğŸ‘‰ ÎÎµÎºÎ¿ÏÏÎ±ÏƒÎ·, Ï€Î¬Î³Î¿Ï‚, Î±Î½ ÏƒÏ…Î½ÎµÏ‡Î¹ÏƒÏ„ÎµÎ¯ Ï€Î®Î³Î±Î¹Î½Îµ Î³Î¹Î±Ï„ÏÏŒ."],
      ["ÎœÏ€Î¿ÏÏ Î½Î± Ï„ÏÎ­Î¾Ï‰ ÏƒÏ„Î· Î²ÏÎ¿Ï‡Î®;", "ğŸ‘‰ ÎÎ±Î¹, ÎµÎºÏ„ÏŒÏ‚ Î±Î½ Î­Ï‡ÎµÎ¹ ÎºÎ±Ï„Î±Î¹Î³Î¯Î´Î±."],
      ["Î ÏŒÏƒÎµÏ‚ Î¼Î­ÏÎµÏ‚ Ï€ÏÎ¹Î½ Ï„Î¿Î½ Î±Î³ÏÎ½Î± ÎºÏŒÎ²Ï‰ Ï„Î± long runs;", "ğŸ‘‰ 2-3 ÎµÎ²Î´Î¿Î¼Î¬Î´ÎµÏ‚ Ï€ÏÎ¹Î½ ÏƒÏ„Î¿Î½ ÎœÎ±ÏÎ±Î¸ÏÎ½Î¹Î¿."],
      ["Î ÏŒÏƒÎ¿ ÏƒÏ…Ï‡Î½Î¬ Î´Î¹Î±Î»ÎµÎ¹Î¼Î¼Î±Ï„Î¹ÎºÎ­Ï‚;", "ğŸ‘‰ 1 Ï†Î¿ÏÎ¬/ÎµÎ²Î´Î¿Î¼Î¬Î´Î±, Ï„Î¿ Ï€Î¿Î»Ï 2."],
      ["Î¤Î¹ Ï€Î±Ï€Î¿ÏÏ„ÏƒÎ¹Î± Î½Î± Ï€Î¬ÏÏ‰;", "ğŸ‘‰ Î‘Î½Î¬Î»Î¿Î³Î± Î¼Îµ Î²Î¬ÏÎ¿Ï‚ ÎºÎ±Î¹ ÏŒÎ³ÎºÎ¿ Ï‡Î¹Î»Î¹Î¿Î¼Î­Ï„ÏÏ‰Î½."],
      ["Î¤Î¹ Ï€Î¯Î½Ï‰ ÏƒÎµ long run >90â€™;", "ğŸ‘‰ Î™ÏƒÎ¿Ï„Î¿Î½Î¹ÎºÏŒ + gels ÎºÎ¬Î¸Îµ 40-45â€™."],
      ["Î”Î¹Î±Ï„Î¬ÏƒÎµÎ¹Ï‚ Ï€ÏÎ¹Î½/Î¼ÎµÏ„Î¬;", "ğŸ‘‰ Î ÏÎ¹Î½ Î´Ï…Î½Î±Î¼Î¹ÎºÎ­Ï‚, Î¼ÎµÏ„Î¬ ÏƒÏ„Î±Ï„Î¹ÎºÎ­Ï‚."],
      ["Î ÏŒÏƒÎµÏ‚ Î¼Î­ÏÎµÏ‚ Ï„ÏÎ­Î¾Î¹Î¼Î¿/ÎµÎ²Î´Î¿Î¼Î¬Î´Î±;", "ğŸ‘‰ Î‘ÏÏ‡Î¬ÏÎ¹Î¿Î¹ 3-4, Î­Î¼Ï€ÎµÎ¹ÏÎ¿Î¹ 5-6."],
      ["Î‘Î½ Î´ÎµÎ½ Î­Ï‡Ï‰ Ï‡ÏÏŒÎ½Î¿;", "ğŸ‘‰ ÎˆÏƒÏ„Ï‰ 20â€™ easy Î® 10x1â€™ intervals ÎºÎ±Î»ÏÏ„ÎµÏÎ¿ Î±Ï€ÏŒ Ï„Î¯Ï€Î¿Ï„Î±."]
    ];

    const faqContainer = document.getElementById("faq");
    faqData.forEach(([q, a]) => {
      const qEl = document.createElement("div");
      qEl.className = "question";
      qEl.textContent = "â“ " + q;
      qEl.onclick = () => {
        aEl.style.display = aEl.style.display === "block" ? "none" : "block";
      };
      const aEl = document.createElement("div");
      aEl.className = "answer";
      aEl.textContent = a;
      faqContainer.appendChild(qEl);
      faqContainer.appendChild(aEl);
    });

    // Î•Î³Î³ÏÎ±Ï†Î® service worker
    if ("serviceWorker" in navigator) {
      navigator.serviceWorker.register("sw.js").then(() => {
        console.log("âœ… Service Worker registered");
      });
    }
  </script>
</body>
</html>
